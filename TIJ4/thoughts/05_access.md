# Access Control

访问权限指示符(按范围递减): **public**, **protected**, package access , **private**

## **Package**即库单元

1. 不同类中即使含有同名元素也可以通过类名区分, 但必须有一种机制能够区分清楚类名, 这就是为什么Java需要对命名空间实现完全控制, 并为每一个类创建唯一的标识
2. 一个包中含有一组类, 这些类存在于同一个命名空间内, 被认为是一个库单元(Library Unit) ,如果不进行包声明, 则默认为*default package*
3. 一个.java文件是一个编译单元(Compilation Unit)或翻译单元(Translation Unit), 里面只能有一个类被声明为**public**, 且类名必须与文件名一致, 此外, 也可以没有**public**类, 文件名可以随意命名, 编译单元中的其他类都是辅助类, 对包外不可见, 在编译时, 每一个类都被单独编译为一个.class文件

### 创建不同的包名

1. Java包中包含了许多类, 为了使其更加紧凑, 有两种方法:
   * 第一种是把包中所有.class文件放在同一目录下
   * 第二种是将包中.class文件打包并压缩为单个JAR文件
2. 方法一解决了两个问题:
   * 便于创建不同的包名
   * 便于在文件系统中找到对应的.class文件
3. 创建不同包名的两个步骤:
   * 包名的第一部分是将作者域名反转
   * 第二部分是承接CLASSPATH的系统文件目录
4. 包名全部小写, 中间用点分隔
5. 对于JAR文件, 必须将包括其本身的完整路径写入CLASSPATH中

### 处理命名空间的三种途径

1. **package**关键词
2. **import**关键词
3. 包名唯一命名规则

### 冲突

1. 即使导入的命名空间中有冲突的类名, 只要不使用, 就不会冲突
2. 如果仅使用冲突类名的其中之一, 可以仅完整声明其类名
3. 如果使用多个冲突类名, 则都必须使用完整的类名

### 选择性编译

1. 使用import语句可以进行选择性编译, 创建两个接口相同的包, 根据情况导入不同的包

## 针对类成员的访问权限指示符

### Package Access

1. 拥有package access的类成员仅对同一个包中的类可见, 在包之外不可见, 在同一个.java文件下的类彼此拥有package access
2. 如果想要访问外部包的类成员, 有以下四种方法:
   * 更改类成员为**public**
   * 更改类成员为package access, 并且将当前包中的类并入外部包
   * 更改类成员为**protected**, 通过继承访问类成员
   * 使用"accessor/mutator"(也叫"get/set")方法, 这是OOP中最先进的方法, 是Java Beans里的基本操作

### **public**: 接口访问权限

### **private**: 别动

1. 类中域一般要声明为私有, 除非你想要展示内部实现
2. 类中方法如果仅仅是支持组件, 那么最好声明为私有
3. 一个应用是将类构造函数声明为私有, 通过静态方法传递改类的对象

### **protected**: 继承访问权限

1. 隐含package access
2. 如果当前包的一个类继承了外部包的一个类, 那么外部包中所有拥有**public, protected**的成员便都可以被操作, 如果继承内部包中的类, 那么还可以访问拥有package access的类成员

## 接口与实现

1. 封装(Encapsulation) = 类对成员的封装 + 实现隐藏(Access Control or Implementation Hiding)
2. 实现隐藏具有两点功能:
   * 在客户端, 只暴露接口, 简化了用户的使用
   * 在库的创建者看来, 隐藏了内部实现, 便于后续的修改
3. 阅读源码接口的三大助手: Java Doc, class browser, JDK Documentation

## 类访问权限

1. 类访问权限实质上决定了该类对用户是否可见, 是比类成员访问权限更高等级的权限
2. 对于拥有package access的类, 其成员被声明为**private**或是package access都是合理的, 不用主动将成员声明为**public**
3. 直接存在于包中的类(非内部类)只能有**public**和package access两种选择, 如果想进一步创建私有类, 可以将其所有成员都声明为私有, 并在static方法中创建对象, 提供对包内的外部接口
4. 将构造函数私有化可以控制所创建对象的数量, 其中极端的情况是*Singleton Design Pattern*, 只允许创建一个对象
5. 注意如果是拥有package access的类, 其类名只对包内的类可见, 对外部类来说, 即使import也无法访问任何类成员(即使是公有静态成员)
6. 默认包针对当前路径，算作单独的一个包
